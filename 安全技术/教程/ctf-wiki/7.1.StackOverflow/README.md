# 7.2.StackOverflow

对于程序的栈区，以下几点需要注意：

1. 程序的栈是从高地址向低地址增长的
2. `x86` 的函数参数在函数返回地址的上面；`x64` 程序的前六个整型或指针型参数依次保存在 `RDI`、`RSI`、`RDX`、`RCX`、`R8`、`R9` 六个寄存器中（`Linux`、`FreeFSD`、`macOS` 采用），更多参数则会保存在栈上。
3. `x64` 的地址长度不能超过 `0x0000 7FFF FFFF FFFF` 六个字节长度，否则会抛出异常。

发生栈溢出的原理是：

- 向程序中写入的字节数，超过了这个变量本身所申请的字节数，导致写入非法的位置。

这种缓冲区溢出漏洞除了发生在栈上，也以同样的原理发生在了堆、`bss` 等上。

可见发生栈溢出或任何其他段的溢出的基本前提是：

- 程序必须向内存中写入数据
- 写入数据的大小没有被良好地控制